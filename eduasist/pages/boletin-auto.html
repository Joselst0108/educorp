<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boleta Automática (V2)</title>
</head>
<body>
  <h1>Boleta Automática (V2)</h1>

  <p>
    Alumno: ve su boleta | Apoderado: elige hijo | Docente/Director: consulta por DNI
  </p>

  <div id="sessionBox">
    <strong id="sessionStatus">Cargando sesión…</strong>
    <button id="btnLogout" type="button" style="display:none">Cerrar sesión</button>
  </div>

  <p><a href="../dashboard.html">— Volver al Dashboard EduAsist</a></p>

  <hr />

  <!-- Panel de consulta por DNI (solo docente/director) -->
  <section id="dniPanel" style="display:none">
    <h3>1) Consultar por DNI del alumno</h3>
    <input id="dniInput" type="text" placeholder="DNI del alumno" />
    <button id="btnBuscarDni" type="button">Ver boleta</button>
    <p id="dniMsg"></p>
  </section>

  <!-- Panel de apoderado (elige hijo) -->
  <section id="apoderadoPanel" style="display:none">
    <h3>1) Elegir hijo</h3>
    <select id="selectHijo"></select>
    <button id="btnVerHijo" type="button">Ver boleta</button>
    <p id="apoderadoMsg"></p>
  </section>

  <!-- Año académico -->
  <section>
    <label for="anioInput"><strong>Año:</strong></label><br />
    <input id="anioInput" type="number" placeholder="2026" />
    <p id="anioMsg"></p>
  </section>

  <hr />

  <h2>Notas</h2>
  <div id="notasBox"></div>

  <h2>Asistencia</h2>
  <div id="asistenciaBox"></div>

  <hr />
  <p><a href="../../index.html">Volver a EduCorp</a></p>

  <!-- ✅ 1) SDK Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- ✅ 2) Tu cliente global (debe crear window.supabase) -->
  <script src="../../assets/js/supabaseClient.js"></script>

  <!-- ✅ 3) Lógica de boleta -->
  <script src="./boleta-automatica-v2.js"></script>
</body>
</html>