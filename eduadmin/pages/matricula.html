<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Matr√≠cula | EduAdmin</title>

<!-- Supabase CDN -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- üî¥ IMPORTANTE: rutas corregidas -->
<script src="../../assets/js/supabaseClient.js"></script>

<style>
body{font-family:Arial;padding:16px}
.box{border:1px solid #ddd;padding:12px;margin:12px 0;border-radius:8px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media(max-width:720px){.row{grid-template-columns:1fr}}
input,select,button{width:100%;padding:8px;margin-top:6px}
button{cursor:pointer}
#modalExistente{display:none;position:fixed;inset:0;background:#0008;align-items:center;justify-content:center}
#modalCard{background:#fff;padding:16px;border-radius:10px;width:90%;max-width:500px}
#debugBox{background:#111;color:#0f0;padding:8px;font-size:12px;margin-top:10px;max-height:180px;overflow:auto}
</style>
</head>

<body>

<h2>üìö Matr√≠cula</h2>

<div class="box">
Colegio ID:
<b id="colegioIdView">-</b>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{
 const c=localStorage.getItem("colegio_id")||"";
 document.getElementById("colegioIdView").textContent=c||"(vac√≠o)";
});
</script>

<!-- ========================= -->
<!-- BUSCAR -->
<!-- ========================= -->
<div class="box">
<h3>1) Buscar alumno por DNI</h3>

<form id="formBuscarDni">
<input id="dniBuscar" placeholder="DNI alumno"/>
<button type="submit" id="btnBuscar">Buscar</button>
</form>

<div id="boxExistente" style="display:none">
<p id="txtExistente"></p>
</div>

<!-- ========================= -->
<!-- NUEVO -->
<!-- ========================= -->
<div id="boxNuevo" style="display:none">

<h3>2) Nueva matr√≠cula</h3>

<form id="formNuevo">

<div class="row">

<div class="box">
<h4>Apoderado</h4>

<label>DNI</label>
<input id="dniApoderado" required>

<label>Nombres</label>
<input id="nombresApoderado" required>

<label>Apellidos</label>
<input id="apellidosApoderado" required>

</div>

<div class="box">
<h4>Alumno</h4>

<label>DNI</label>
<input id="dniAlumno" required>

<label>Nombres</label>
<input id="nombresAlumno" required>

<label>Apellidos</label>
<input id="apellidosAlumno" required>

</div>

</div>

<div class="box">
<h4>Credenciales</h4>
<p>Usuario ser√°: DNI@educorp.local</p>
<p>Contrase√±a inicial: DNI</p>
</div>

<button type="submit">Registrar matr√≠cula</button>

<div id="debugBox"></div>

</form>

</div>
</div>

<!-- ========================= -->
<!-- MODAL EXISTENTE -->
<!-- ========================= -->
<div id="modalExistente">
<div id="modalCard">

<h3>Alumno ya existe</h3>
<div id="modalBody"></div>

<button id="btnConfirmarMatricula">Confirmar</button>
<button id="btnReingreso">Reingreso</button>
<button id="btnTraslado">Traslado</button>
<button id="btnRetiro">Retiro</button>
<button id="btnCerrarModal">Cerrar</button>

</div>
</div>

<!-- üî¥ JS MATR√çCULA -->
<script src="../js/matricula.js"></script>

</body>
</html>