<!DOCTYPE html>
<html lang="es" data-app="eduadmin">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EduAdmin | T√çTULO</title>

  <!-- ===== CSS GENERAL (NO TOCAR) ===== -->
  <link rel="stylesheet" href="../../assets/css/variables.css">
  <link rel="stylesheet" href="../../assets/css/main.css">
  <link rel="stylesheet" href="../../assets/css/components.css">

  <!-- ===== CSS SOLO DE ESTA P√ÅGINA (opcional) ===== -->
  <style>
    .grid-2 { display:grid; grid-template-columns: 1fr 1.2fr; gap:16px; }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
    .muted { opacity:.75; }
  </style>
</head>

<body>
  <div class="app-shell">

    <!-- ===== SIDEBAR (GENERAL) ===== -->
    <aside class="sidebar">
      <div class="brand">
        <img id="uiAppLogo" src="../../assets/img/educorp.jpeg" />
        <div class="titles">
          <b>EduAdmin</b>
          <span>Administraci√≥n real</span>
        </div>
      </div>
      <nav id="uiSidebarNav" class="nav"></nav>
    </aside>

    <!-- ===== MAIN ===== -->
    <main class="main">

      <!-- ===== TOPBAR GENERAL ===== -->
      <div class="topbar">
        <div class="topbar-left">
          <img id="uiSchoolLogo" src="../../assets/img/eduadmin.jpeg" class="topbar-logo"/>
          <div class="topbar-meta">
            <div id="uiSchoolName" class="topbar-title">Cargando colegio...</div>
            <div id="uiYearName" class="topbar-subtitle">A√±o: ‚Äî</div>
          </div>
        </div>

        <div class="topbar-actions">
          <button id="btnRefresh" class="btn btn-secondary">Actualizar</button>
          <a href="./dashboard.html" class="btn btn-secondary">Volver</a>
        </div>
      </div>

      <!-- ===================================================== -->
      <!-- üî¥üî¥üî¥ DESDE AQU√ç EDITAS CADA P√ÅGINA üî¥üî¥üî¥ -->
      <!-- ===================================================== -->
<div class="page-header">
  <h1>Colegios</h1>
  <div id="status" class="status muted">Cargando‚Ä¶</div>
</div>

<div class="grid-2">

  <!-- Crear colegio -->
  <div class="card">
    <h2 class="card-title">Crear colegio (Superadmin)</h2>

    <div id="msg" class="muted" style="margin-bottom:10px;"></div>

    <form id="formCreateSchool" class="form">
      <div class="form-group">
        <label for="newNombre">Nombre</label>
        <input id="newNombre" type="text" required placeholder="Ej: I.E. Antonia Moreno de C√°ceres" />
      </div>

      <div class="form-group">
        <label for="newCodigo">C√≥digo modular (opcional)</label>
        <input id="newCodigo" type="text" placeholder="Ej: 1234567" />
      </div>

      <div class="form-group">
        <label for="newDireccion">Direcci√≥n (opcional)</label>
        <input id="newDireccion" type="text" placeholder="Ej: Ventanilla, Callao" />
      </div>

      <div class="form-group">
        <label for="newLogo">Logo URL (opcional)</label>
        <input id="newLogo" type="text" placeholder="https://..." />
      </div>

      <div class="form-group" style="display:flex; gap:10px; align-items:center;">
        <input id="newActivo" type="checkbox" checked />
        <label for="newActivo" style="margin:0;">Activo</label>
      </div>

      <button id="btnCreateSchool" type="submit" class="btn btn-primary" style="width:100%;">Crear colegio</button>

      <div id="onlySuperadminMsg" class="muted" style="display:none; margin-top:10px;">
        üîí Solo superadmin puede crear colegios.
      </div>
    </form>
  </div>

  <!-- Listado -->
  <div class="card">
    <h2 class="card-title">Colegios registrados</h2>

    <div style="display:flex; gap:10px; flex-wrap:wrap; margin:10px 0;">
      <div class="form-group" style="margin:0; min-width:240px; flex:1;">
        <label for="qBuscar">Buscar</label>
        <input id="qBuscar" type="text" placeholder="Nombre o c√≥digo modular..." />
      </div>

      <div class="form-group" style="margin:0; min-width:200px;">
        <label>&nbsp;</label>
        <button id="btnReload" type="button" class="btn btn-secondary" style="width:100%;">Recargar</button>
      </div>
    </div>

    <div class="table-wrap">
      <table class="table">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>C√≥digo</th>
            <th>Direcci√≥n</th>
            <th>Activo</th>
            <th style="text-align:right;">Acciones</th>
          </tr>
        </thead>
        <tbody id="tbodySchools">
          <tr><td colspan="5" class="muted">Cargando‚Ä¶</td></tr>
        </tbody>
      </table>
    </div>

    <div class="muted" style="margin-top:10px;">
      * Editar/activar recomendado solo para superadmin.
    </div>
  </div>

</div>

<!-- Editor simple -->
<div class="card" id="editBox" style="display:none;">
  <h2 class="card-title">Editar colegio</h2>

  <form id="formEditSchool" class="form">
    <input id="editId" type="hidden" />

    <div class="grid-2">
      <div class="form-group">
        <label for="editNombre">Nombre</label>
        <input id="editNombre" required />
      </div>

      <div class="form-group">
        <label for="editCodigo">C√≥digo modular</label>
        <input id="editCodigo" />
      </div>
    </div>

    <div class="grid-2">
      <div class="form-group">
        <label for="editDireccion">Direcci√≥n</label>
        <input id="editDireccion" />
      </div>

      <div class="form-group">
        <label for="editLogo">Logo URL</label>
        <input id="editLogo" />
      </div>
    </div>

    <div class="form-group" style="display:flex; gap:10px; align-items:center;">
      <input id="editActivo" type="checkbox" />
      <label for="editActivo" style="margin:0;">Activo</label>
    </div>

    <div style="display:flex; gap:10px;">
      <button id="btnSaveEdit" type="submit" class="btn btn-primary">Guardar cambios</button>
      <button id="btnCancelEdit" type="button" class="btn btn-secondary">Cancelar</button>
    </div>
  </form>
</div>


      <!-- ===================================================== -->
      <!-- üî¥üî¥üî¥ HASTA AQU√ç EDITAS üî¥üî¥üî¥ -->
      <!-- ===================================================== -->

    </main>
  </div>

  <!-- ===== SCRIPTS GENERALES (NO TOCAR) ===== -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../../assets/js/supabaseClient.js"></script>
  <script src="../../assets/js/context.js"></script>
  <script src="../../assets/js/ui.js"></script>

  <!-- ACTIVA SIDEBAR -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (window.renderEduAdminSidebar) {
        window.renderEduAdminSidebar();
      }
    });
  </script>

  <!-- ===== JS SOLO DE ESTA P√ÅGINA ===== -->
  <script src="../js/NOMBRE.js"></script>

</body>
</html>
