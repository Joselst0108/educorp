<!DOCTYPE html>
<html lang="es" data-app="eduadmin">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EduAdmin | Matrículas</title>

<link rel="stylesheet" href="../../assets/css/variables.css">
<link rel="stylesheet" href="../../assets/css/main.css">
<link rel="stylesheet" href="../../assets/css/components.css">

<style>
.grid-2{display:grid;grid-template-columns:1fr 1.2fr;gap:16px}
@media(max-width:900px){.grid-2{grid-template-columns:1fr}}
</style>
</head>

<body>
<div class="app-shell">

<!-- SIDEBAR -->
<aside class="sidebar">
<div class="brand">
<img src="../../assets/img/educorp.jpeg">
<div class="titles">
<b>EduAdmin</b>
<span>Administración real</span>
</div>
</div>
<nav id="uiSidebarNav" class="nav"></nav>
</aside>

<main class="main">

<div class="topbar">
<div class="topbar-left">
<img id="uiSchoolLogo" src="../../assets/img/eduadmin.jpeg" class="topbar-logo">
<div class="topbar-meta">
<div id="uiSchoolName">Cargando...</div>
<div id="uiYearName">Año: —</div>
</div>
</div>

<div class="topbar-actions">
<button id="btnRefresh" class="btn btn-secondary">Actualizar</button>
<a href="./dashboard.html" class="btn btn-secondary">Volver</a>
</div>
</div>

<div class="page-header">
<h1>Matrículas</h1>
<div id="status">Cargando...</div>
</div>

<div class="grid-2">

<!-- FORM -->
<div class="card">
<h2>Registrar matrícula</h2>

<form id="formMatricula">
<input type="hidden" id="matricula_id">

<label>Alumno</label>
<select id="alumno_id"></select>

<label>Nivel</label>
<select id="nivel_id"></select>

<label>Grado</label>
<select id="grado_id"></select>

<label>Sección</label>
<select id="seccion_id"></select>

<label>Estado</label>
<select id="estado">
<option value="matriculado">Matriculado</option>
<option value="reservado">Reservado</option>
<option value="retirado">Retirado</option>
</select>

<label>Fecha</label>
<input type="date" id="fecha">

<label>Observación</label>
<input id="observacion">

<label>
<input type="checkbox" id="activo" checked>
Activo
</label>

<div style="margin-top:10px">
<button class="btn btn-primary">Guardar</button>
<button type="button" id="btnLimpiar" class="btn btn-secondary">Limpiar</button>
</div>

<div id="msg"></div>
</form>
</div>

<!-- LISTA -->
<div class="card">
<h2>Lista</h2>

<input id="buscar" placeholder="Buscar...">
<select id="filtroEstado">
<option value="">Todos</option>
<option value="matriculado">Matriculado</option>
<option value="reservado">Reservado</option>
<option value="retirado">Retirado</option>
</select>

<div>Total: <b id="count">0</b></div>

<table class="table">
<thead>
<tr>
<th>Alumno</th>
<th>Nivel</th>
<th>Grado</th>
<th>Sección</th>
<th>Estado</th>
<th>Activo</th>
<th></th>
</tr>
</thead>
<tbody id="tbodyMatriculas"></tbody>
</table>
</div>

</div>
</main>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="../../assets/js/supabaseClient.js"></script>
<script src="../../assets/js/context.js"></script>
<script src="../../assets/js/ui.js"></script>

<script>
document.addEventListener("DOMContentLoaded",()=>{
if(window.renderEduAdminSidebar) window.renderEduAdminSidebar();
});
</script>

<script src="../js/matriculas.js"></script>
</body>
</html>